#!/usr/bin/env bash

. "${HARNESS_HOME}/bin/harness-env"

USER_ID=$1
ROLE_SET=$2
RESOURCE_ID=$3

if [ -z "$USER_ID" ] || [ -z "$ROLE_SET" ] || [ -z "$RESOURCE_ID" ] ; then
    echo -e "${RED}Malformed command, not enough parameters${NC}"
    echo -e "Expected command: ${CYAN}harness grant <user-id> [client | admin] [<engine-id> | *]${NC}"
    exit 1
fi

PYTHON_ARGS="grant -u $USER_ID -r $ROLE_SET -e $RESOURCE_ID"

echo -e "${CYAN}Run ${HARNESS_HOME}/bin/users.py ${PYTHON_ARGS}${NC}"

${HARNESS_HOME}/bin/users.py ${PYTHON_ARGS}
