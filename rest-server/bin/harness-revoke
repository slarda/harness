#!/usr/bin/env bash

. "${HARNESS_HOME}/bin/harness-env"

USER_ID=$1
RESOURCE_ID=$2

if [ ! -z $3 ] ; then
    echo -e "${RED}Malformed command, too many parameters${NC}"
    echo -e "Expected command: ${CYAN}harness grant <user-id> [client | admin] [<engine-id> | *]${NC}"
    exit 1
fi

if [ -z "$USER_ID" ] || [ -z "$RESOURCE_ID" ] ; then
    echo -e "${RED}Malformed command, not enough parameters${NC}"
    echo -e "Expected command: ${CYAN}harness grant <user-id> [client | admin] [<engine-id> | *]${NC}"
    exit 1
fi

PYTHON_ARGS="revoke -u $USER_ID -e $RESOURCE_ID"

echo -e "${CYAN}Run ${HARNESS_HOME}/bin/users.py ${PYTHON_ARGS}${NC}"

${HARNESS_HOME}/bin/users.py ${PYTHON_ARGS}
